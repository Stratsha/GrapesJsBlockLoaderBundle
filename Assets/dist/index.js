/*! grapesjs-block-loader-bundle - 1.0.29 */
!function(e,o){'object'==typeof exports&&'object'==typeof module?module.exports=o():'function'==typeof define&&define.amd?define([],o):'object'==typeof exports?exports["grapesjs-block-loader-bundle"]=o():e["grapesjs-block-loader-bundle"]=o()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},o={};e.r(o),window.CustomBlockLoaderNamespace=window.CustomBlockLoaderNamespace||{};return window.MauticGrapesJsPlugins||(window.MauticGrapesJsPlugins=[]),window.MauticGrapesJsPlugins.push({name:'GrapesJsBlockLoader',plugin:function(e){e.on('load',(function(){var o='',n='';if(null!==window.id&&null!==window.id[0]&&void 0!==window.id[0])'page_sessionId'===window.id[0].id?n='page':'emailform_sessionId'===window.id[0].id&&(n='email');else{var t=document.querySelector('div.builder.email-builder'),l=document.querySelector('div.builder.page-builder');null!==t?n='email':null!==l&&(n='page')}if(null!==window.Mautic&&null!==window.Mautic.builderTheme)o=window.Mautic.builderTheme;else{var i=document.querySelectorAll('button.select-theme-selected');if(null!==i)Array.from(i).forEach((function(e){if(!e.classList.contains('hide')){var n=e.parentElement;if(null!==n){var t=n.querySelector('a.select-theme-link.btn.btn-default.hide');null!==t&&t instanceof HTMLElement&&(o=t.dataset.theme)}}}))}if(null!=o&&''!==o&&''!==n){o=o.toLowerCase();var a='';'page'===n?a="/themes/".concat(o,"/blocks/blocks-page.js"):(n='email')&&(a="/themes/".concat(o,"/blocks/blocks-email.js"));var r=document.getElementById('injectedBlocksScript');return null!==r&&r.remove(),new Promise((function(o,n){var t=document.createElement('script');t.type='text/javascript',t.charset='utf-8',t.async=!0,t.id='injectedBlocksScript',t.src=a,t.onload=function(){o(t);var n=e.BlockManager;for(var l in!0===window.CustomBlockLoaderNamespace.removeDefaults&&n.getAll().reset(),window.CustomBlockLoaderNamespace.blocks)if('string'==typeof l){var i=window.CustomBlockLoaderNamespace.blocks[l];n.add(l,i)}},t.onerror=function(){n(new Error("Script load error for ".concat(a)))},document.body.appendChild(t)})).catch((function(e){return console.log(e.message)}))}}))},context:['page','email-mjml','email-html']}),o})()));
//# sourceMappingURL=index.js.map