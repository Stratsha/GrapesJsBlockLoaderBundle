/*! grapesjs-block-loader-bundle - 1.0.10 */
!function(e,o){'object'==typeof exports&&'object'==typeof module?module.exports=o():'function'==typeof define&&define.amd?define([],o):'object'==typeof exports?exports["grapesjs-block-loader-bundle"]=o():e["grapesjs-block-loader-bundle"]=o()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},o={};e.r(o),window.CustomBlockLoaderNamespace=window.CustomBlockLoaderNamespace||{};return window.MauticGrapesJsPlugins||(window.MauticGrapesJsPlugins=[]),window.MauticGrapesJsPlugins.push({name:'GrapesJsBlockLoader',plugin:function(e){e.on('load',(function(){var o='',l='';if(null!==window.id&&null!==window.id[0]&&void 0!==window.id[0])'page_sessionId'===window.id[0].id?l='page':'emailform_sessionId'===window.id[0].id&&(l='email');else{var a=document.querySelector('div.builder.email-builder'),n=document.querySelector('div.builder.page-builder');null!==a?l='email':null!==n&&(l='page')}if(null!==window.Mautic&&null!==window.Mautic.builderTheme)o=window.Mautic.builderTheme;else{var t=document.querySelectorAll('button.select-theme-selected');if(null!==t)Array.from(t).forEach((function(e){if(!e.classList.contains('hide')){var l=e.parentElement;if(null!==l){var a=l.querySelector('a.select-theme-link.btn.btn-default.hide');null!==a&&a instanceof HTMLElement&&(o=a.dataset.theme)}}}))}if(null!=o&&''!==o&&''!==l){o=o.toLowerCase();var i='',r='';if('page'===l?(i="/themes/".concat(o,"/blocks/blocks-page.js"),r="".concat(o,"-page")):(l='email')&&(i="/themes/".concat(o,"/blocks/blocks-email.js"),r="".concat(o,"-email")),null===document.getElementById(r))return console.log('Will try to load: '+i),new Promise((function(o,l){var a=document.createElement('script');a.type='text/javascript',a.charset='utf-8',a.async=!0,a.id=r,a.src=i,a.onload=function(){o(a);var l=e.BlockManager;for(var n in window.CustomBlockLoaderNamespace.removeDefaults&&l.getAll().reset(),window.CustomBlockLoaderNamespace.blocks)l.add(n,window.CustomBlockLoaderNamespace.blocks[n])},a.onerror=function(){l(new Error("Script load error for ".concat(i)))},document.body.appendChild(a)}));var d=e.BlockManager;for(var c in window.CustomBlockLoaderNamespace.removeDefaults&&d.getAll().reset(),window.CustomBlockLoaderNamespace.blocks)d.add(c,window.CustomBlockLoaderNamespace.blocks[c])}}))},context:['page','email-mjml']}),o})()));
//# sourceMappingURL=index.js.map