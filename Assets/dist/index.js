/*! grapesjs-block-loader-bundle - 1.0.21 */
!function(e,o){'object'==typeof exports&&'object'==typeof module?module.exports=o():'function'==typeof define&&define.amd?define([],o):'object'==typeof exports?exports["grapesjs-block-loader-bundle"]=o():e["grapesjs-block-loader-bundle"]=o()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},o={};e.r(o),window.CustomBlockLoaderNamespace=window.CustomBlockLoaderNamespace||{};return window.MauticGrapesJsPlugins||(window.MauticGrapesJsPlugins=[]),window.MauticGrapesJsPlugins.push({name:'GrapesJsBlockLoader',plugin:function(e){e.on('load',(function(){var o='',l='';if(null!==window.id&&null!==window.id[0]&&void 0!==window.id[0])'page_sessionId'===window.id[0].id?l='page':'emailform_sessionId'===window.id[0].id&&(l='email');else{var n=document.querySelector('div.builder.email-builder'),t=document.querySelector('div.builder.page-builder');null!==n?l='email':null!==t&&(l='page')}if(null!==window.Mautic&&null!==window.Mautic.builderTheme)o=window.Mautic.builderTheme;else{var a=document.querySelectorAll('button.select-theme-selected');if(null!==a)Array.from(a).forEach((function(e){if(!e.classList.contains('hide')){var l=e.parentElement;if(null!==l){var n=l.querySelector('a.select-theme-link.btn.btn-default.hide');null!==n&&n instanceof HTMLElement&&(o=n.dataset.theme)}}}))}if(null!=o&&''!==o&&''!==l){o=o.toLowerCase();var i='';'page'===l?i="/themes/".concat(o,"/blocks/blocks-page.js"):(l='email')&&(i="/themes/".concat(o,"/blocks/blocks-email.js"));var c=document.getElementById('injectedBlocksScript');return null!==c&&c.remove(),console.log('Will try to load: '+i),new Promise((function(o,l){var n=document.createElement('script');n.type='text/javascript',n.charset='utf-8',n.async=!0,n.id='injectedBlocksScript',n.src=i,n.onload=function(){o(n);var l=e.BlockManager;for(var t in!0===window.CustomBlockLoaderNamespace.removeDefaults&&l.getAll().reset(),window.CustomBlockLoaderNamespace.blocks)'string'==typeof t&&null!==window.CustomBlockLoaderNamespace.blocks[t].label&&'undefined'!==window.CustomBlockLoaderNamespace.blocks[t].label&&'string'==typeof window.CustomBlockLoaderNamespace.blocks[t].label&&null!==window.CustomBlockLoaderNamespace.blocks[t].content&&'undefined'!==window.CustomBlockLoaderNamespace.blocks[t].content&&'string'==typeof window.CustomBlockLoaderNamespace.blocks[t].content&&l.add(t,window.CustomBlockLoaderNamespace.blocks[t])},n.onerror=function(){l(new Error("Script load error for ".concat(i)))},document.body.appendChild(n)})).catch((function(e){return console.log(e.message)}))}}))},context:['page','email-mjml','email-html']}),o})()));
//# sourceMappingURL=index.js.map