/*! grapesjs-block-loader-bundle - 1.0.17 */
!function(e,o){'object'==typeof exports&&'object'==typeof module?module.exports=o():'function'==typeof define&&define.amd?define([],o):'object'==typeof exports?exports["grapesjs-block-loader-bundle"]=o():e["grapesjs-block-loader-bundle"]=o()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},o={};e.r(o),window.CustomBlockLoaderNamespace=window.CustomBlockLoaderNamespace||{};return window.MauticGrapesJsPlugins||(window.MauticGrapesJsPlugins=[]),window.MauticGrapesJsPlugins.push({name:'GrapesJsBlockLoader',plugin:function(e){e.on('load',(function(){var o='',n='';if(console.dir(window),null!==window.id&&null!==window.id[0]&&void 0!==window.id[0])'page_sessionId'===window.id[0].id?n='page':'emailform_sessionId'===window.id[0].id&&(n='email');else{var l=document.querySelector('div.builder.email-builder'),t=document.querySelector('div.builder.page-builder');null!==l?n='email':null!==t&&(n='page')}if(null!==window.Mautic&&null!==window.Mautic.builderTheme)o=window.Mautic.builderTheme;else{var i=document.querySelectorAll('button.select-theme-selected');if(null!==i)Array.from(i).forEach((function(e){if(!e.classList.contains('hide')){var n=e.parentElement;if(null!==n){var l=n.querySelector('a.select-theme-link.btn.btn-default.hide');null!==l&&l instanceof HTMLElement&&(o=l.dataset.theme)}}}))}if(null!=o&&''!==o&&''!==n){o=o.toLowerCase();var a='';'page'===n?a="/themes/".concat(o,"/blocks/blocks-page.js"):(n='email')&&(a="/themes/".concat(o,"/blocks/blocks-email.js"));var r=document.getElementById('injectedBlocksScript');return null!==r&&r.remove(),console.log('Will try to load: '+a),new Promise((function(o,n){var l=document.createElement('script');l.type='text/javascript',l.charset='utf-8',l.async=!0,l.id='injectedBlocksScript',l.src=a,l.onload=function(){o(l);var n=e.BlockManager;for(var t in window.CustomBlockLoaderNamespace.removeDefaults&&n.getAll().reset(),window.CustomBlockLoaderNamespace.blocks)n.add(t,window.CustomBlockLoaderNamespace.blocks[t])},l.onerror=function(){n(new Error("Script load error for ".concat(a)))},document.body.appendChild(l)})).catch((function(e){return console.log(e.message)}))}}))},context:['page','email-mjml','email-html']}),o})()));
//# sourceMappingURL=index.js.map